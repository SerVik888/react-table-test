{"version":3,"sources":["components/table.module.css","components/TableFilter.js","components/TableBody.js","components/TableHead.js","components/Pagination.js","context/tableContext/TableContext.js","App.js","context/types.js","context/tableContext/tableReducer.js","data.js","api.js","context/tableContext/paginateReducer.js","context/tableContext/TableState.js","index.js"],"names":["module","exports","TableFilter","dataLength","tableFilter","useState","columnName","condition","inputValue","state","setState","inputError","setInputError","console","log","handleChange","target","name","value","test","length","prev","className","s","filter","dataNotFound","filterFields","selectorName","selector","onChange","inputWrapper","input","placeholder","errorInput","onClick","handleSubmit","btn","type","TableBody","currentItems","data","setCurrentItems","pageSize","currentPage","useEffect","tableRow","map","item","datacreat","title","quantity","distance","id","TableHead","sortTop","sortDown","sortItem","tableHead","Pagination","React","memo","totalItems","paginate","pageNumbers","i","Math","ceil","push","pagination","number","activePageNum","pageNum","TableContext","createContext","App","useContext","setData","GET_DATA","PAGINATE","GET_CURRENT_ITEMS","FILTER","SORT_TOP","SORT_DOWN","handlers","action","sort","a","b","String","toLowerCase","includes","Number","tableReducer","DEFAULT","axios","get","result","page","slice","firstItemIndex","lastItemIndex","paginateReducer","TableState","children","initialState","useReducer","tableState","tableDispatch","paginateState","paginateDispatch","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.64476c0b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"columnName\":\"table_columnName__3Rt5h\",\"pagination\":\"table_pagination__1gM-s\",\"pageNum\":\"table_pageNum__h0Mrk\",\"activePageNum\":\"table_activePageNum__3bxhI\",\"filter\":\"table_filter__3AwYH\",\"filterFields\":\"table_filterFields__31Xd2\",\"input\":\"table_input__3EfLg\",\"inputWrapper\":\"table_inputWrapper__2GS_l\",\"errorInput\":\"table_errorInput__jhB97\",\"btn\":\"table_btn__jpLQ8\",\"selector\":\"table_selector__33Sfb\",\"selectorName\":\"table_selectorName__1WcvD\",\"dataNotFound\":\"table_dataNotFound__10NUZ\"};","import React, { useState } from 'react'\r\nimport s from './table.module.css'\r\n\r\nexport const TableFilter = ({ dataLength, tableFilter }) => {\r\n  // создаём два состояния ,\r\n  // первое(setState) контролировать данные из селекторов и поля ввода\r\n  // второе(setInputError) контролировать ошику\r\n\r\n  const [state, setState] = useState({\r\n    columnName: 'all',\r\n    condition: '=',\r\n    inputValue: '',\r\n  })\r\n  const [inputError, setInputError] = useState('')\r\n  console.log('render filter')\r\n  // обрабатываем состояние селекторов и поля ввода\r\n  // валидируем поле ввода если введёное значениене не корректно показываем ошибку\r\n  // иначе обнуляем ошибку и добавляем данные в локальный state\r\n\r\n  const handleChange = ({ target: { name, value } }) => {\r\n    const re = /[^a-zA-Z0-9]/g\r\n    if (name === 'inputValue' && re.test(value)) {\r\n      return setInputError('Только цифры и лат. буквы')\r\n    } else if (name === 'inputValue' && value.length >= 11) {\r\n      return setInputError('Макс. кол-во символов 10')\r\n    } else {\r\n      setInputError('')\r\n    }\r\n    setState((prev) => ({ ...prev, [name]: value }))\r\n  }\r\n\r\n  // Обрабатываем нажатие кнопкп\r\n  // После нажания забираем данные из локального состояния и отравляем их в reducer для фильтрации\r\n  // Если значение поля ввода нет , показываем ошибку\r\n\r\n  const handleSubmit = (columnName, condition, inputValue) => {\r\n    if (!inputValue) {\r\n      return setInputError('Введите символ')\r\n    }\r\n    tableFilter(columnName, condition, inputValue)\r\n    state.inputValue = ''\r\n  }\r\n\r\n  return (\r\n    <form className={s.filter}>\r\n      {dataLength === 0 && <h2 className={s.dataNotFound}> Ни чего не найдено!</h2>}\r\n\r\n      <div className={s.filterFields}>\r\n        <p className={s.selectorName}>Колонка :</p>\r\n        <select\r\n          className={s.selector}\r\n          name='columnName'\r\n          value={state.columnName}\r\n          onChange={handleChange}\r\n        >\r\n          <option value={'allааа'}>Все</option>\r\n          <option value={'title'}>Название</option>\r\n          <option value={'quantity'}>Колличество</option>\r\n          <option value={'distance'}>Расстояние</option>\r\n        </select>\r\n      </div>\r\n      <div className={s.filterFields}>\r\n        <p className={s.selectorName}>Условие :</p>\r\n        <select\r\n          className={s.selector}\r\n          name='condition'\r\n          value={state.condition}\r\n          onChange={handleChange}\r\n        >\r\n          {/* Если выбрана колонка 'Все' или 'Название' скрываем условия 'больше', 'меньше' т.к там могут быть\r\n      строковые значения */}\r\n\r\n          <option value={'='}>Равно</option>\r\n          <option value={'includes'}>Содержит</option>\r\n          {(state.columnName === 'distance' || state.columnName === 'quantity') && (\r\n            <option value={'>'}>Больше</option>\r\n          )}\r\n          {(state.columnName === 'distance' || state.columnName === 'quantity') && (\r\n            <option value={'<'}>Меньше</option>\r\n          )}\r\n        </select>\r\n      </div>\r\n      <div className={s.inputWrapper}>\r\n        <input\r\n          className={s.input}\r\n          placeholder='поиск'\r\n          value={state.inputValue}\r\n          name='inputValue'\r\n          onChange={handleChange}\r\n        />\r\n\r\n        {inputError && <div className={s.errorInput}>{inputError}</div>}\r\n      </div>\r\n      <div>\r\n        <button\r\n          onClick={() => {\r\n            handleSubmit(state.columnName, state.condition, state.inputValue)\r\n          }}\r\n          className={s.btn}\r\n          type='button'\r\n        >\r\n          Фильтровать\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport s from './table.module.css'\r\n\r\nexport const TableBody = ({ currentItems, data, setCurrentItems, pageSize, currentPage }) => {\r\n  useEffect(() => {\r\n    setCurrentItems(data, pageSize, currentPage)\r\n  }, [currentPage, data])\r\n  console.log('render body')\r\n\r\n  return (\r\n    <tbody className={s.tableRow}>\r\n      {currentItems.map((item) => (\r\n        <tr key={item.id}>\r\n          <td>{item.datacreat}</td>\r\n          <td>{item.title}</td>\r\n          <td>{item.quantity}</td>\r\n          <td>{item.distance}</td>\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport s from './table.module.css'\r\n\r\nexport const TableHead = ({ sortTop, sortDown, sortItem }) => {\r\n  console.log('render head')\r\n  return (\r\n    <thead className={s.tableHead}>\r\n      <tr>\r\n        <th>\r\n          <span>Дата</span>\r\n        </th>\r\n        <th\r\n          onClick={() => {\r\n            !sortItem ? sortTop('title') : sortDown('title')\r\n          }}\r\n          className={s.columnName}\r\n        >\r\n          <span>Название</span>\r\n        </th>\r\n        <th\r\n          onClick={() => {\r\n            !sortItem ? sortTop('quantity') : sortDown('quantity')\r\n          }}\r\n          className={s.columnName}\r\n        >\r\n          <span>Количество</span>\r\n        </th>\r\n        <th\r\n          onClick={() => {\r\n            !sortItem ? sortTop('distance') : sortDown('distance')\r\n          }}\r\n          className={s.columnName}\r\n        >\r\n          <span>Расстояние</span>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport s from './table.module.css'\r\n\r\nexport const Pagination = React.memo(({ pageSize, totalItems, currentPage, paginate }) => {\r\n  const pageNumbers = []\r\n\r\n  for (let i = 1; i <= Math.ceil(totalItems / pageSize); i++) {\r\n    pageNumbers.push(i)\r\n  }\r\n  console.log('render pagination')\r\n  return (\r\n    <div className={s.pagination}>\r\n      {pageNumbers.map((number) => (\r\n        <div\r\n          key={number}\r\n          className={number === currentPage ? s.activePageNum : s.pageNum}\r\n          onClick={() => {\r\n            paginate(number)\r\n          }}\r\n        >\r\n          {number}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n})\r\n","import React from 'react'\r\n\r\nexport const TableContext = React.createContext()\r\n","import React, { useContext, useEffect, useMemo } from 'react'\nimport './App.css'\n\nimport { TableFilter } from './components/TableFilter'\nimport { TableBody } from './components/TableBody'\nimport { TableHead } from './components/TableHead'\nimport { Pagination } from './components/Pagination'\nimport { TableContext } from './context/tableContext/TableContext'\n\nexport const App = () => {\n  // При помощи деструктуризации получаем данные и функцию диспатч из контекста\n  const {\n    data,\n    sortItem,\n    currentPage,\n    currentItems,\n    setCurrentItems,\n    pageSize,\n    setData,\n    paginate,\n    sortTop,\n    sortDown,\n    tableFilter,\n  } = useContext(TableContext)\n  console.log(\n    data,\n    sortItem,\n    currentPage,\n    currentItems,\n    setCurrentItems,\n    pageSize,\n    setData,\n    paginate,\n    sortTop,\n    sortDown,\n    tableFilter\n  )\n\n  useEffect(() => {\n    setData()\n  }, [])\n\n  // useEffect(() => {\n  //   setCurrentItems(data, pageSize, currentPage)\n  // }, [data])\n  // console.log(data)\n  // console.log(currentItems)\n  if (!data) {\n    return <h1>Подождите идёт загрузка</h1>\n  }\n\n  return (\n    <div className='App'>\n      <TableFilter dataLength={data.length} tableFilter={tableFilter} />\n      <table>\n        <TableHead sortItem={sortItem} sortTop={sortTop} sortDown={sortDown} />\n        <TableBody\n          data={data}\n          currentItems={currentItems}\n          setCurrentItems={setCurrentItems}\n          pageSize={pageSize}\n          currentPage={currentPage}\n        />\n      </table>\n      <Pagination\n        totalItems={data.length}\n        pageSize={pageSize}\n        currentPage={currentPage}\n        paginate={paginate}\n      />\n    </div>\n  )\n}\n","export const GET_DATA = 'GET_DATA'\r\nexport const PAGINATE = 'PAGINATE'\r\nexport const GET_CURRENT_ITEMS = 'GET_CURRENT_ITEMS'\r\nexport const FILTER = 'FILTER'\r\nexport const SORT_TOP = 'SORT_TOP'\r\nexport const SORT_DOWN = 'SORT_DOWN'\r\n","import { FILTER, GET_DATA, SORT_DOWN, SORT_TOP } from '../types'\r\n\r\n// export const tableReducer = (state, action) => {\r\n\r\nconst handlers = {\r\n  [GET_DATA]: (state, action) => ({\r\n    ...state,\r\n    data: action.data,\r\n  }),\r\n  [SORT_TOP]: (state, action) => ({\r\n    ...state,\r\n    data: [...state.data.sort((a, b) => (a[action.item] < b[action.item] ? 1 : -1))],\r\n    sortItem: action.item,\r\n  }),\r\n  [SORT_DOWN]: (state, action) => ({\r\n    ...state,\r\n    data: [...state.data.sort((a, b) => (a[action.item] > b[action.item] ? 1 : -1))],\r\n    sortItem: null,\r\n  }),\r\n\r\n  [FILTER]: (state, action) => ({\r\n    ...state,\r\n    data: state.data.filter((i) => {\r\n      if (action.columnName === 'all' && action.condition === '=') {\r\n        return (\r\n          String(i.title).toLowerCase() === action.inputValue.toLowerCase() ||\r\n          String(i.quantity).toLowerCase() === action.inputValue.toLowerCase() ||\r\n          String(i.distance).toLowerCase() === action.inputValue.toLowerCase()\r\n        )\r\n      } else if (action.columnName === 'all' && action.condition === 'includes') {\r\n        return (\r\n          i.title.toLowerCase().includes(action.inputValue.toLowerCase()) ||\r\n          String(i.quantity).toLowerCase().includes(action.inputValue.toLowerCase()) ||\r\n          String(i.distance).toLowerCase().includes(action.inputValue.toLowerCase())\r\n        )\r\n      } else if (action.columnName === 'title' && action.condition === '=') {\r\n        return String(i.title).toLowerCase() === action.inputValue.toLowerCase()\r\n      } else if (action.columnName === 'title' && action.condition === 'includes') {\r\n        return i.title.toLowerCase().includes(action.inputValue.toLowerCase())\r\n      } else if ((action.columnName === 'quantity' || 'distance') && action.condition === '=') {\r\n        return i[action.columnName] === Number(action.inputValue)\r\n      } else if (\r\n        (action.columnName === 'quantity' || 'distance') &&\r\n        action.condition === 'includes'\r\n      ) {\r\n        return String(i[action.columnName]).includes(action.inputValue)\r\n      } else if ((action.columnName === 'quantity' || 'distance') && action.condition === '>') {\r\n        return i[action.columnName] > Number(action.inputValue)\r\n      } else if ((action.columnName === 'distance' || 'quantity') && action.condition === '<') {\r\n        return i[action.columnName] < Number(action.inputValue)\r\n      } else return null\r\n    }),\r\n    currentPage: 1,\r\n  }),\r\n  DEFAULT: (state) => state,\r\n}\r\n\r\nexport const tableReducer = (state, action) => {\r\n  const handler = handlers[action.type] || handlers.DEFAULT\r\n  return handler(state, action)\r\n}\r\n","export const data = [\r\n  { id: 1, datacreat: '28.06.2021', title: 'Car', quantity: 10, distance: 100 },\r\n  { id: 2, datacreat: '28.06.2022', title: 'Car', quantity: 10, distance: 1002 },\r\n  { id: 3, datacreat: '29.06.2022', title: 'SmartCar', quantity: 1, distance: 1100 },\r\n  { id: 4, datacreat: '30.06.2022', title: 'Bus', quantity: 5, distance: 1100 },\r\n  { id: 5, datacreat: '02.07.2021', title: 'SmartBus', quantity: 50, distance: 1200 },\r\n  { id: 6, datacreat: '03.07.2021', title: 'Auto', quantity: 500, distance: 12 },\r\n  { id: 7, datacreat: '05.07.2021', title: 'Tesla', quantity: 1, distance: 1 },\r\n  { id: 8, datacreat: '06.07.2021', title: 'BMW', quantity: 15, distance: 100 },\r\n  { id: 9, datacreat: '07.07.2021', title: 'Mersedes', quantity: 22, distance: 10 },\r\n  { id: 10, datacreat: '08.07.2021', title: 'Audi', quantity: 20, distance: 103 },\r\n  { id: 11, datacreat: '09.07.2021', title: 'Reno', quantity: 202, distance: 1030 },\r\n  { id: 13, datacreat: '28.06.2021', title: 'Lada2112', quantity: 10, distance: 100 },\r\n  { id: 14, datacreat: '28.08.2021', title: 'Lada2106', quantity: 10, distance: 500000 },\r\n  { id: 15, datacreat: '28.08.2021', title: 'Mazda626', quantity: 56, distance: 50000 },\r\n  { id: 16, datacreat: '28.08.2021', title: 'OpelVectra', quantity: 124, distance: 52000 },\r\n  { id: 17, datacreat: '28.08.2021', title: 'RenoMegan', quantity: 124, distance: 362000 },\r\n  { id: 18, datacreat: '28.08.2021', title: 'Volga2000', quantity: 124, distance: 3620000 },\r\n  { id: 19, datacreat: '28.09.2021', title: 'SuperCar', quantity: 14, distance: 3620000 },\r\n  { id: 20, datacreat: '28.09.2021', title: 'SuperBus24', quantity: 14, distance: 3620000 },\r\n  { id: 21, datacreat: '28.10.2021', title: 'Bus24', quantity: 14, distance: 362 },\r\n  { id: 22, datacreat: '28.10.2025', title: 'Car365', quantity: 14, distance: 36200 },\r\n  { id: 23, datacreat: '28.10.2025', title: 'Bus365', quantity: 164, distance: 356005 },\r\n  { id: 24, datacreat: '28.11.2025', title: 'Bus376', quantity: 250, distance: 35605 },\r\n]\r\n","import axios from 'axios'\r\n\r\nexport const API = {\r\n  fetchData: async () => {\r\n    const result = await axios.get('http://localhost:8080/api/item')\r\n    return result.data\r\n    // getData(result.data)\r\n  },\r\n}\r\n","import { GET_CURRENT_ITEMS, GET_DATA, PAGINATE } from '../types'\r\n\r\n// export const tableReducer = (state, action) => {\r\n\r\nconst handlers = {\r\n  [PAGINATE]: (state, action) => ({\r\n    ...state,\r\n    currentPage: action.page,\r\n    // currentItems: state.data.slice(action.firstItemIndex, action.lastItemIndex),\r\n  }),\r\n  [GET_CURRENT_ITEMS]: (state, action) => ({\r\n    ...state,\r\n    // currentPage: action.page,\r\n    currentItems: action.data.slice(action.firstItemIndex, action.lastItemIndex),\r\n  }),\r\n  DEFAULT: (state) => state,\r\n}\r\n\r\nexport const paginateReducer = (state, action) => {\r\n  const handler = handlers[action.type] || handlers.DEFAULT\r\n  return handler(state, action)\r\n}\r\n","import React, { useReducer } from 'react'\r\n\r\nimport { tableReducer } from './tableReducer'\r\nimport { API } from '../../api'\r\nimport { GET_DATA, PAGINATE, SORT_TOP, SORT_DOWN, FILTER, GET_CURRENT_ITEMS } from '../types'\r\nimport { TableContext } from './TableContext'\r\nimport { data } from '../../data'\r\nimport { paginateReducer } from './paginateReducer'\r\n\r\nexport const TableState = ({ children }) => {\r\n  const initialState = {\r\n    data: null,\r\n    currentPage: 1,\r\n    pageSize: 7,\r\n    sortItem: null,\r\n    currentItems: [],\r\n  }\r\n  const [tableState, tableDispatch] = useReducer(tableReducer, initialState)\r\n  const [paginateState, paginateDispatch] = useReducer(paginateReducer, initialState)\r\n\r\n  // Так как не смог разместить сервер и БД удалённо, пришлось для\r\n  // деплоя брать данные из статичного файла.\r\n\r\n  const setData = () => {\r\n    // const data = await API.fetchData()\r\n    tableDispatch({ type: GET_DATA, data })\r\n  }\r\n\r\n  const tableFilter = (columnName, condition, inputValue) =>\r\n    tableDispatch({ type: FILTER, columnName, condition, inputValue })\r\n\r\n  const sortTop = (item) => tableDispatch({ type: SORT_TOP, item })\r\n  const sortDown = (item) => tableDispatch({ type: SORT_DOWN, item })\r\n\r\n  const setCurrentItems = (data, pageSize, currentPage) => {\r\n    const lastItemIndex = currentPage * pageSize\r\n    const firstItemIndex = lastItemIndex - pageSize\r\n    paginateDispatch({ type: GET_CURRENT_ITEMS, data, firstItemIndex, lastItemIndex })\r\n  }\r\n  // const lastItemIndex = paginateState.currentPage * state.pageSize\r\n  // const firstItemIndex = lastItemIndex - state.pageSize\r\n  // const currentItems = () => state.data.slice(firstItemIndex, lastItemIndex)\r\n\r\n  const paginate = (page) => paginateDispatch({ type: PAGINATE, page })\r\n\r\n  return (\r\n    <TableContext.Provider\r\n      value={{\r\n        data: tableState.data,\r\n        sortItem: tableState.sortItem,\r\n        pageSize: tableState.pageSize,\r\n        currentPage: paginateState.currentPage,\r\n        currentItems: paginateState.currentItems,\r\n        setCurrentItems,\r\n        setData,\r\n        sortTop,\r\n        sortDown,\r\n        paginate,\r\n        tableFilter,\r\n      }}\r\n    >\r\n      {children}\r\n    </TableContext.Provider>\r\n  )\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport { App } from './App'\nimport { TableState } from './context/tableContext/TableState'\n\nReactDOM.render(\n  <TableState>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </TableState>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}